<?xml version="1.0" encoding="UTF-8" ?>
<project name="SiteDatabase" id="Project_1d1b" database="Sqlite" >
	<schema name="Default" >
		<table name="abiturients" prior="Tbl" >
			<column name="id" type="integer" jt="4" mandatory="y" >
				<identity><![CDATA[autoincrement]]></identity>
			</column>
			<column name="userID" type="integer" jt="4" />
			<column name="fname" type="varchar" length="100" jt="12" mandatory="y" />
			<column name="sname" type="varchar" length="100" jt="12" mandatory="y" />
			<column name="tname" type="varchar" length="100" jt="12" />
			<column name="birthday" type="date" jt="91" mandatory="y" />
			<column name="birthplace" type="text" jt="-1" />
			<column name="country" type="text" length="2" jt="-1" />
			<index name="pk_abiturients" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<fk name="fk_abiturients_usersID" to_schema="Default" to_table="users" delete_action="cascade" update_action="cascade" >
				<fk_column name="userID" pk="id" />
			</fk>
		</table>
		<table name="claims" prior="Tbl" >
			<column name="id" type="integer" jt="4" mandatory="y" >
				<identity><![CDATA[autoincrement]]></identity>
			</column>
			<column name="abitID" type="integer" jt="4" mandatory="y" />
			<column name="spec_id" type="text" jt="-1" mandatory="y" />
			<column name="schoolName" prior="sh" type="text" jt="-1" mandatory="y" />
			<column name="endDate" type="date" jt="91" mandatory="y" />
			<column name="attestate" type="text" jt="-1" mandatory="y" />
			<column name="passPlace" type="text" jt="-1" mandatory="y" />
			<column name="livePlace" type="text" jt="-1" />
			<column name="phone" prior="ph" type="text" jt="-1" mandatory="y" />
			<column name="army" type="text" jt="-1" >
				<defo><![CDATA['none']]></defo>
			</column>
			<column name="lang" type="text" jt="-1" mandatory="y" />
			<column name="healthGroup" prior="healthGr" type="text" jt="-1" mandatory="y" />
			<column name="needHostel" type="boolean" jt="-7" mandatory="y" />
			<column name="motherName" prior="m" type="text" jt="-1" />
			<column name="motherPhone" type="text" jt="-1" />
			<column name="fatherName" type="text" length="100" jt="-1" />
			<column name="fatherPhone" type="text" jt="-1" />
			<column name="consents" type="boolean" jt="-7" mandatory="y" >
				<defo><![CDATA[True]]></defo>
			</column>
			<index name="pk_claims" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<fk name="fk_claims_profs" to_schema="Default" to_table="profs" delete_action="cascade" update_action="cascade" >
				<fk_column name="spec_id" pk="spec_id" />
			</fk>
			<fk name="fk_claims_abiturients" to_schema="Default" to_table="abiturients" delete_action="cascade" update_action="cascade" >
				<fk_column name="abitID" pk="id" />
			</fk>
		</table>
		<table name="passports" prior="Tbl" >
			<column name="id" type="integer" jt="4" mandatory="y" >
				<identity><![CDATA[autoincrement]]></identity>
			</column>
			<column name="abitID" type="integer" jt="4" mandatory="y" />
			<column name="serial" type="integer" jt="4" mandatory="y" />
			<column name="number" type="integer" jt="4" mandatory="y" />
			<column name="date" type="date" jt="91" mandatory="y" />
			<column name="creator" type="text" jt="-1" mandatory="y" />
			<index name="pk_passports" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<fk name="fk_passports_abiturients" to_schema="Default" to_table="abiturients" delete_action="cascade" update_action="cascade" >
				<fk_column name="abitID" pk="id" />
			</fk>
		</table>
		<table name="profs" prior="Tbl" >
			<column name="spec_id" type="text" jt="-1" />
			<column name="name" type="text" length="100" jt="-1" />
			<column name="spec_data" type="text" jt="-1" />
			<column name="legend" type="text" jt="-1" />
			<column name="photoWay" type="text" jt="-1" />
			<index name="sqlite_autoindex_profs_1" unique="UNIQUE_KEY" >
				<column name="spec_id" />
			</index>
		</table>
		<table name="users" prior="Tbl" >
			<column name="id" type="integer" jt="4" mandatory="y" >
				<identity><![CDATA[autoincrement]]></identity>
			</column>
			<column name="login" type="text" jt="-1" />
			<column name="password" type="binary" length="64" jt="-2" />
			<column name="rules" type="text" jt="-1" mandatory="y" >
				<defo><![CDATA['Абитуриент']]></defo>
			</column>
			<index name="pk_users" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
		</table>
	</schema>
	<connector name="Sqlite" database="Sqlite" driver_class="org.sqlite.JDBC" driver_jar="sqlite-jdbc-3.34.0.jar" driver_desc="Standard" host="localhost" port="7210" instance="D:/Diplome2/database.db" />
	<layout name="Layout" id="Layout_f93" show_relation="columns" >
		<entity schema="Default" name="abiturients" color="C1D8EE" x="64" y="320" />
		<entity schema="Default" name="claims" color="C1D8EE" x="416" y="48" />
		<entity schema="Default" name="passports" color="C1D8EE" x="416" y="416" />
		<entity schema="Default" name="profs" color="C1D8EE" x="896" y="160" />
		<entity schema="Default" name="users" color="C1D8EE" x="48" y="96" />
		<script name="SQL_Editor" id="Editor_31d" language="SQL" >
			<string><![CDATA[CREATE TABLE profs ( 
	spec_id              text     ,
	name                 text     ,
	spec_data            text     ,
	legend               text     ,
	photoWay             text     ,
	CONSTRAINT Unq_profs_spec_id UNIQUE ( spec_id ) 
 );

CREATE TABLE users ( 
	id                   integer NOT NULL  PRIMARY KEY autoincrement ,
	login                text     ,
	password             text     ,
	rules                text NOT NULL DEFAULT 'Абитуриент'   
 );

CREATE TABLE abiturients ( 
	id                   integer NOT NULL  PRIMARY KEY autoincrement ,
	userID               integer     ,
	fname                varchar(100) NOT NULL    ,
	sname                varchar(100) NOT NULL    ,
	tname                varchar(100)     ,
	birthday             date NOT NULL    ,
	birthplace           text     ,
	country              text     ,
	FOREIGN KEY ( userID ) REFERENCES users( id ) ON DELETE CASCADE ON UPDATE CASCADE
 );

CREATE TABLE claims ( 
	id                   integer NOT NULL  PRIMARY KEY autoincrement ,
	abitID               integer NOT NULL    ,
	spec_id              text NOT NULL    ,
	schoolName           text NOT NULL    ,
	endDate              date NOT NULL    ,
	attestate            text NOT NULL    ,
	passPlace            text NOT NULL    ,
	livePlace            text     ,
	phone                text NOT NULL    ,
	army                 text  DEFAULT 'none'   ,
	lang                 text NOT NULL    ,
	healthGroup          text NOT NULL    ,
	needHostel           boolean NOT NULL    ,
	motherName           text     ,
	motherPhone          text     ,
	fatherName           text     ,
	fatherPhone          text     ,
	consents             boolean NOT NULL DEFAULT True   ,
	FOREIGN KEY ( spec_id ) REFERENCES profs( spec_id ) ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY ( abitID ) REFERENCES abiturients( id ) ON DELETE CASCADE ON UPDATE CASCADE
 );

CREATE TABLE passports ( 
	id                   integer NOT NULL  PRIMARY KEY autoincrement ,
	abitID               integer NOT NULL    ,
	serial               integer NOT NULL    ,
	number               integer NOT NULL    ,
	date                 date NOT NULL    ,
	creator              text NOT NULL    ,
	FOREIGN KEY ( abitID ) REFERENCES abiturients( id ) ON DELETE CASCADE ON UPDATE CASCADE
 );]]></string>
		</script>
		<script name="profs" id="Editor_1c3e" language="SQL" >
			<string><![CDATA[SELECT spec_id, name, spec_data, legend, photoWay
FROM
	profs s;]]></string>
		</script>
	</layout>
</project>